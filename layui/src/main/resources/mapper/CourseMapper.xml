<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zsq.mapper.CourseMapper">
    <insert id="addCourse" useGeneratedKeys="true" keyProperty="course_id">
        insert into oc_course
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="course_title != null and course_title !=''">
                course_title,
            </if>
            <if test="course_subtitle != null and course_subtitle !=''">
                course_subtitle,
            </if>
            <if test="course_desc != null and course_desc !=''">
                course_desc,
            </if>
            <if test="course_detail != null and course_detail !=''">
                course_detail,
            </if>
            <if test="is_free != null and is_free !=''">
                is_free,
            </if>
            <if test="course_price != null and course_price !=''">
                course_price,
            </if>
            <if test="is_discount != null and is_discount !=''">
                is_discount,
            </if>
            <if test="discount_desc != null and discount_desc !=''">
                discount_desc,
            </if>
            <if test="discount_price != null and discount_price !=''">
                discount_price,
            </if>
            <if test="course_level != null and course_level !=''">
                course_level,
            </if>
            <if test="participations_count != null and participations_count !=''">
                participations_count,
            </if>
            <if test="course_cover != null and course_cover !=''">
                course_cover,
            </if>
            <if test="course_banner != null and course_banner !=''">
                course_banner,
            </if>
            <if test="is_carousel != null and is_carousel !=''">
                is_carousel,
            </if>
            <if test="course_if_foreign != null and course_if_foreign !=''">
                course_if_foreign,
            </if>
            <if test="view_counts != null and view_counts !=''">
                view_counts,
            </if>
            <if test="is_recommend != null and is_recommend !=''">
                is_recommend,
            </if>
            <if test="course_status != null and course_status !=''">
                course_status,
            </if>
            <if test="detail_img != null and detail_img !=''">
                detail_img,
            </if>
            <if test="show_detail_img != null and show_detail_img !=''">
                show_detail_img,
            </if>
            <if test="enable != null and enable !=''">
                enable,
            </if>
            <if test="remark != null and remark !=''">
                remark,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="course_title != null and course_title !=''">
                #{course_title},
            </if>
            <if test="course_subtitle != null and course_subtitle !=''">
                #{course_subtitle},
            </if>
            <if test="course_desc != null and course_desc !=''">
                #{course_desc},
            </if>
            <if test="course_detail != null and course_detail !=''">
                #{course_detail},
            </if>
            <if test="is_free != null and is_free !=''">
                #{is_free},
            </if>
            <if test="course_price != null and course_price !=''">
                #{course_price},
            </if>
            <if test="is_discount != null and is_discount !=''">
                #{is_discount},
            </if>
            <if test="discount_desc != null and discount_desc !=''">
                #{discount_desc},
            </if>
            <if test="discount_price != null and discount_price !=''">
                #{discount_price},
            </if>
            <if test="course_level != null and course_level !=''">
                #{course_level},
            </if>
            <if test="participations_count != null and participations_count !=''">
                #{participations_count},
            </if>
            <if test="course_cover != null and course_cover !=''">
                #{course_cover},
            </if>
            <if test="course_banner != null and course_banner !=''">
                #{course_banner},
            </if>
            <if test="is_carousel != null and is_carousel !=''">
                #{is_carousel},
            </if>
            <if test="course_if_foreign != null and course_if_foreign !=''">
                #{course_if_foreign},
            </if>
            <if test="view_counts != null and view_counts !=''">
                #{view_counts},
            </if>
            <if test="is_recommend != null and is_recommend !=''">
                #{is_recommend},
            </if>
            <if test="course_status != null and course_status !=''">
                #{course_status},
            </if>
            <if test="detail_img != null and detail_img !=''">
                #{detail_img},
            </if>
            <if test="show_detail_img != null and show_detail_img !=''">
                #{show_detail_img},
            </if>
            <if test="enable != null and enable !=''">
                #{enable},
            </if>
            <if test="remark != null and remark !=''">
                #{remark},
            </if>
        </trim>
    </insert>
    <update id="updateCourse">
        update oc_course
        <trim prefix="set" suffixOverrides=",">
            <if test="course_title != null and course_title !=''">
                course_title=#{course_title},
            </if>
            <if test="course_subtitle != null and course_subtitle !=''">
                course_subtitle=#{course_subtitle},
            </if>
            <if test="course_desc != null and course_desc !=''">
                course_desc=#{course_desc},
            </if>
            <if test="course_detail != null and course_detail !=''">
                course_detail=#{course_detail},
            </if>
            <if test="is_free != null and is_free !=''">
                is_free=#{is_free},
            </if>
            <if test="course_price != null and course_price !=''">
                course_price=#{course_price},
            </if>
            <if test="is_discount != null and is_discount !=''">
                is_discount=#{is_discount},
            </if>
            <if test="discount_desc != null and discount_desc !=''">
                discount_desc=#{discount_desc},
            </if>
            <if test="discount_price != null and discount_price !=''">
                discount_price=#{discount_price},
            </if>
            <if test="course_level != null and course_level !=''">
                course_level=#{course_level},
            </if>
            <if test="participations_count != null and participations_count !=''">
                participations_count=#{participations_count},
            </if>
            <if test="course_cover != null and course_cover !=''">
                course_cover=#{course_cover},
            </if>
            <if test="course_banner != null and course_banner !=''">
                course_banner=#{course_banner},
            </if>
            <if test="is_carousel != null and is_carousel !=''">
                is_carousel=#{is_carousel},
            </if>
            <if test="course_if_foreign != null and course_if_foreign !=''">
                course_if_foreign=#{course_if_foreign},
            </if>
            <if test="view_counts != null and view_counts !=''">
                view_counts=#{view_counts},
            </if>
            <if test="is_recommend != null and is_recommend !=''">
                is_recommend=#{is_recommend},
            </if>
            <if test="course_status != null and course_status !=''">
                course_status=#{course_status},
            </if>
            <if test="detail_img != null and detail_img !=''">
                detail_img=#{detail_img},
            </if>
            <if test="show_detail_img != null and show_detail_img !=''">
                show_detail_img=#{show_detail_img},
            </if>
            <if test="enable != null and enable !=''">
                enable=#{enable},
            </if>
            <if test="remark != null and remark !=''">
                remark=#{remark},
            </if>
        </trim>
        where course_id=#{course_id}
    </update>
    <select id="getCourseList" parameterType="course" resultType="course">
        select distinct c.* from oc_course c left join oc_subject_course osc on c.course_id = osc.course_id
        <where>
            <if test="true">
                c.del_flag = 0
            </if>
            <if test="course_title != null and course_title != ''">
                and c.course_title like concat('%',#{course_title},'%')
            </if>
            <if test="subject_id != null and subject_id != ''">
                and osc.subject_id =#{subject_id}
            </if>
        </where>
    </select>
    <select id="findCourseById" resultType="com.zsq.pojo.Course">
        SELECT c.*,osc.`subject_id` FROM oc_course c, oc_subject_course osc WHERE c.course_id=#{course_id} AND
        osc.`course_id`=#{course_id}
    </select>


</mapper>